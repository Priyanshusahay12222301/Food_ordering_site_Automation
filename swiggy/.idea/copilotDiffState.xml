<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/restaurant-search-util.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/restaurant-search-util.js" />
              <option name="originalContent" value="const { Builder, By, Key, until } = require('selenium-webdriver');&#10;&#10;class RestaurantSearchUtil {&#10;    constructor() {&#10;        this.driver = new Builder().forBrowser('chrome').build();&#10;    }&#10;&#10;    async setLocation(location) {&#10;        // Implementation for setting location&#10;    }&#10;&#10;    // NEW: Complete flow until opening the restaurant page from Dining &gt; Online order&#10;    async openRestaurantFromDining(location = 'bangalore', restaurantName = 'Oven Express') {&#10;        await this.driver.get('https://www.swiggy.com/');&#10;        await this.setLocation(location);&#10;        await this.goToDiningPage();&#10;        await this.goToOnlineOrderTab();&#10;        await this.selectRestaurantByName(restaurantName);&#10;        // Stop here as requested (restaurant page opened)&#10;    }&#10;&#10;    // NEW: Click the Dining page entry&#10;    async goToDiningPage() {&#10;        const candidates = [&#10;            By.xpath(&quot;//a[.//text()[contains(.,'Dining') or contains(.,'Dineout')]]&quot;),&#10;            By.css(&quot;a[href*='dineout'], a[href*='dining']&quot;),&#10;            By.xpath(&quot;//button[.//text()[contains(.,'Dining') or contains(.,'Dineout')]]&quot;)&#10;        ];&#10;        let link;&#10;        for (const by of candidates) {&#10;            try {&#10;                link = await this.driver.wait(until.elementLocated(by), 5000);&#10;                break;&#10;            } catch { /* try next */ }&#10;        }&#10;        if (!link) throw new Error('Dining link not found');&#10;        await link.click();&#10;        await this.driver.wait(&#10;            until.urlMatches(/dine|dining|dineout/i),&#10;            10000&#10;        );&#10;    }&#10;&#10;    // NEW: Switch to &quot;Online order&quot; tab inside Dining&#10;    async goToOnlineOrderTab() {&#10;        const tabBy = By.xpath(&#10;            &quot;//button[contains(translate(.,'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz'),'online order') or &quot; +&#10;            &quot;contains(translate(.,'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz'),'order online') or &quot; +&#10;            &quot;contains(translate(.,'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz'),'delivery') or &quot; +&#10;            &quot;contains(@data-testid,'online-order-tab')]&quot;&#10;        );&#10;        const tab = await this.driver.wait(until.elementLocated(tabBy), 10000);&#10;        await tab.click();&#10;        // wait for restaurant list grid/cards&#10;        await this.driver.wait(&#10;            until.any(&#10;                until.elementLocated(By.css('[data-testid=&quot;restaurant-card&quot;]')),&#10;                until.elementLocated(By.css('[class*=&quot;restaurant&quot;], [class*=&quot;card&quot;]'))&#10;            ),&#10;            10000&#10;        );&#10;    }&#10;&#10;    // NEW: Find and click a restaurant card by visible name&#10;    async selectRestaurantByName(name = 'Oven Express') {&#10;        const normalizedName = name.toLowerCase();&#10;&#10;        // Try to locate without scrolling first&#10;        let target = await this.findRestaurantCardByNameOnce(normalizedName);&#10;        // If not found, try to scroll a few times (lazy loaded lists)&#10;        let attempts = 0;&#10;        while (!target &amp;&amp; attempts &lt; 8) {&#10;            await this.driver.executeScript('window.scrollBy(0, Math.min(800, document.body.scrollHeight));');&#10;            await this.driver.sleep(400);&#10;            target = await this.findRestaurantCardByNameOnce(normalizedName);&#10;            attempts++;&#10;        }&#10;        if (!target) throw new Error(`Restaurant &quot;${name}&quot; not found`);&#10;&#10;        await target.click();&#10;&#10;        // Wait for restaurant/menu page to load (menu items or header)&#10;        await this.driver.wait(&#10;            until.any(&#10;                until.elementLocated(By.css('[data-testid=&quot;menu-item&quot;]')),&#10;                until.elementLocated(By.css('[class*=&quot;menu&quot;] [class*=&quot;item&quot;]')),&#10;                until.elementLocated(By.xpath(&quot;//*[contains(translate(.,'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz'),'recommended')]&quot;))&#10;            ),&#10;            10000&#10;        );&#10;    }&#10;&#10;    // Helper: one-shot find of a restaurant card by name&#10;    async findRestaurantCardByNameOnce(lowerName) {&#10;        const cardSelectors = [&#10;            '[data-testid=&quot;restaurant-card&quot;]',&#10;            '[class*=&quot;restaurant&quot;]:not([role=&quot;tab&quot;])',&#10;            '[class*=&quot;card&quot;]'&#10;        ].join(',');&#10;        const cards = await this.driver.findElements(By.css(cardSelectors));&#10;        for (const card of cards) {&#10;            try {&#10;                const text = (await card.getText()).toLowerCase();&#10;                if (text.includes(lowerName)) return card;&#10;            } catch { /* ignore */ }&#10;        }&#10;        // Fallback: any link with the name&#10;        try {&#10;            return await this.driver.findElement(&#10;                By.xpath(`//a[contains(translate(.,'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz'),'${lowerName}')]`)&#10;            );&#10;        } catch {&#10;            return null;&#10;        }&#10;    }&#10;&#10;    async close() {&#10;        await this.driver.quit();&#10;    }&#10;}&#10;&#10;module.exports = RestaurantSearchUtil;&#10;" />
              <option name="updatedContent" value="// @ts-check&#10;const { Builder, By, Key, until } = require('selenium-webdriver');&#10;/** @typedef {import('selenium-webdriver').WebDriver} WebDriver */&#10;&#10;class RestaurantSearchUtil {&#10;    /**&#10;     * @param {WebDriver} driver&#10;     */&#10;    constructor(driver) {&#10;        /** @type {WebDriver} */&#10;        this.driver = driver;&#10;    }&#10;&#10;    async setLocation(location) {&#10;        // Try to focus/open the location input if it's behind a trigger&#10;        try {&#10;            const triggers = await this.driver.findElements(&#10;                By.css('[data-testid*=&quot;location&quot;] button, [aria-label*=&quot;location&quot; i], [data-testid*=&quot;change-address&quot;]')&#10;            );&#10;            if (triggers.length) await triggers[0].click();&#10;        } catch { /* ignore */ }&#10;&#10;        // Type location&#10;        const input = await this.driver.wait(&#10;            until.elementLocated(&#10;                By.css('input[placeholder*=&quot;location&quot; i], input[placeholder*=&quot;delivery&quot; i], input[placeholder*=&quot;area&quot; i]')&#10;            ),&#10;            10000&#10;        );&#10;        await input.clear();&#10;        await input.sendKeys(location);&#10;&#10;        // Pick first suggestion&#10;        const firstSuggestion = await this.driver.wait(&#10;            until.elementLocated(&#10;                By.css('[role=&quot;listbox&quot;] [role=&quot;option&quot;], [data-testid*=&quot;suggestion&quot;] li, li[class*=&quot;suggestion&quot;]')&#10;            ),&#10;            10000&#10;        );&#10;        await firstSuggestion.click();&#10;&#10;        // Allow page to update to selected location&#10;        await this.driver.sleep(1000);&#10;    }&#10;&#10;    // NEW: Complete flow until opening the restaurant page from Dining &gt; Online order&#10;    async openRestaurantFromDining(location = 'bangalore', restaurantName = 'Oven Express') {&#10;        await this.driver.get('https://www.swiggy.com/');&#10;        await this.setLocation(location);&#10;        await this.goToDiningPage();&#10;        await this.goToOnlineOrderTab();&#10;        await this.selectRestaurantByName(restaurantName);&#10;        // Stop here as requested (restaurant page opened)&#10;    }&#10;&#10;    // NEW: Click the Dining page entry&#10;    async goToDiningPage() {&#10;        const candidates = [&#10;            By.xpath(&quot;//a[.//text()[contains(.,'Dining') or contains(.,'Dineout')]]&quot;),&#10;            By.css(&quot;a[href*='dineout'], a[href*='dining']&quot;),&#10;            By.xpath(&quot;//button[.//text()[contains(.,'Dining') or contains(.,'Dineout')]]&quot;)&#10;        ];&#10;        let link;&#10;        for (const by of candidates) {&#10;            try {&#10;                link = await this.driver.wait(until.elementLocated(by), 5000);&#10;                break;&#10;            } catch { /* try next */ }&#10;        }&#10;        if (!link) throw new Error('Dining link not found');&#10;        await link.click();&#10;        await this.driver.wait(&#10;            until.urlMatches(/dine|dining|dineout/i),&#10;            10000&#10;        );&#10;    }&#10;&#10;    // NEW: Switch to &quot;Online order&quot; tab inside Dining&#10;    async goToOnlineOrderTab() {&#10;        const tabBy = By.xpath(&#10;            &quot;//button[contains(translate(.,'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz'),'online order') or &quot; +&#10;            &quot;contains(translate(.,'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz'),'order online') or &quot; +&#10;            &quot;contains(translate(.,'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz'),'delivery') or &quot; +&#10;            &quot;contains(@data-testid,'online-order-tab')]&quot;&#10;        );&#10;        const tab = await this.driver.wait(until.elementLocated(tabBy), 10000);&#10;        await tab.click();&#10;        // wait for restaurant list grid/cards&#10;        await this.driver.wait(&#10;            until.any(&#10;                until.elementLocated(By.css('[data-testid=&quot;restaurant-card&quot;]')),&#10;                until.elementLocated(By.css('[class*=&quot;restaurant&quot;], [class*=&quot;card&quot;]'))&#10;            ),&#10;            10000&#10;        );&#10;    }&#10;&#10;    // NEW: Find and click a restaurant card by visible name&#10;    async selectRestaurantByName(name = 'Oven Express') {&#10;        const normalizedName = name.toLowerCase();&#10;&#10;        // Try to locate without scrolling first&#10;        let target = await this.findRestaurantCardByNameOnce(normalizedName);&#10;        // If not found, try to scroll a few times (lazy loaded lists)&#10;        let attempts = 0;&#10;        while (!target &amp;&amp; attempts &lt; 8) {&#10;            await this.driver.executeScript('window.scrollBy(0, Math.min(800, document.body.scrollHeight));');&#10;            await this.driver.sleep(400);&#10;            target = await this.findRestaurantCardByNameOnce(normalizedName);&#10;            attempts++;&#10;        }&#10;        if (!target) throw new Error(`Restaurant &quot;${name}&quot; not found`);&#10;&#10;        await target.click();&#10;&#10;        // Wait for restaurant/menu page to load (menu items or header)&#10;        await this.driver.wait(&#10;            until.any(&#10;                until.elementLocated(By.css('[data-testid=&quot;menu-item&quot;]')),&#10;                until.elementLocated(By.css('[class*=&quot;menu&quot;] [class*=&quot;item&quot;]')),&#10;                until.elementLocated(By.xpath(&quot;//*[contains(translate(.,'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz'),'recommended')]&quot;))&#10;            ),&#10;            10000&#10;        );&#10;    }&#10;&#10;    // Helper: one-shot find of a restaurant card by name&#10;    async findRestaurantCardByNameOnce(lowerName) {&#10;        const cardSelectors = [&#10;            '[data-testid=&quot;restaurant-card&quot;]',&#10;            '[class*=&quot;restaurant&quot;]:not([role=&quot;tab&quot;])',&#10;            '[class*=&quot;card&quot;]'&#10;        ].join(',');&#10;        const cards = await this.driver.findElements(By.css(cardSelectors));&#10;        for (const card of cards) {&#10;            try {&#10;                const text = (await card.getText()).toLowerCase();&#10;                if (text.includes(lowerName)) return card;&#10;            } catch { /* ignore */ }&#10;        }&#10;        // Fallback: any link with the name&#10;        try {&#10;            return await this.driver.findElement(&#10;                By.xpath(`//a[contains(translate(.,'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz'),'${lowerName}')]`)&#10;            );&#10;        } catch {&#10;            return null;&#10;        }&#10;    }&#10;&#10;    async close() {&#10;        await this.driver.quit();&#10;    }&#10;}&#10;&#10;module.exports = RestaurantSearchUtil;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/test-restaurant-search.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/test-restaurant-search.js" />
              <option name="originalContent" value="const { Builder } = require('selenium-webdriver');&#10;const RestaurantSearchUtil = require('./restaurant-search-util');&#10;&#10;async function testRestaurantSearch() {&#10;    let driver;&#10;    try {&#10;        // ...existing code to init driver...&#10;        driver = await new Builder().forBrowser('chrome').build();&#10;&#10;        const searchUtil = new RestaurantSearchUtil(driver);&#10;&#10;        // NEW: Go via Dining -&gt; Online order -&gt; select &quot;Oven Express&quot;&#10;        await searchUtil.openRestaurantFromDining('bangalore', 'Oven Express');&#10;&#10;        console.log('Opened &quot;Oven Express&quot; page from Dining &gt; Online order');&#10;        await driver.sleep(3000); // brief visual confirmation&#10;    } catch (error) {&#10;        console.error('Test failed with error:', error);&#10;    } finally {&#10;        if (driver) await driver.quit();&#10;    }&#10;}&#10;&#10;testRestaurantSearch();&#10;" />
              <option name="updatedContent" value="// @ts-check&#10;const { Builder } = require('selenium-webdriver');&#10;const RestaurantSearchUtil = require('./restaurant-search-util');&#10;&#10;async function testRestaurantSearch() {&#10;    let driver;&#10;    try {&#10;        // ...existing code to init driver...&#10;        driver = await new Builder().forBrowser('chrome').build();&#10;&#10;        const searchUtil = new RestaurantSearchUtil(driver);&#10;&#10;        // NEW: Go via Dining -&gt; Online order -&gt; select &quot;Oven Express&quot;&#10;        await searchUtil.openRestaurantFromDining('bangalore', 'Oven Express');&#10;&#10;        console.log('Opened &quot;Oven Express&quot; page from Dining &gt; Online order');&#10;        await driver.sleep(3000); // brief visual confirmation&#10;    } catch (error) {&#10;        console.error('Test failed with error:', error);&#10;    } finally {&#10;        if (driver) await driver.quit();&#10;    }&#10;}&#10;&#10;testRestaurantSearch();" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>